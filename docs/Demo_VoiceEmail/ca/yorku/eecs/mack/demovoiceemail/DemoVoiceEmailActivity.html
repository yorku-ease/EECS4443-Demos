<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_372) on Thu Jan 11 06:15:52 EST 2024 -->
<title>DemoVoiceEmailActivity</title>
<meta name="date" content="2024-01-11">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DemoVoiceEmailActivity";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../ca/yorku/eecs/mack/demovoiceemail/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ca/yorku/eecs/mack/demovoiceemail/DemoVoiceEmailActivity.html" target="_top">Frames</a></li>
<li><a href="DemoVoiceEmailActivity.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ca.yorku.eecs.mack.demovoiceemail</div>
<h2 title="Class DemoVoiceEmailActivity" class="title">Class DemoVoiceEmailActivity</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>Activity</li>
<li>
<ul class="inheritance">
<li>ca.yorku.eecs.mack.demovoiceemail.DemoVoiceEmailActivity</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DemoVoiceEmailActivity</span>
extends Activity</pre>
<div class="block"><style> pre {font-size:110%} </style>

 Demo_VoiceEmail - demonstrate recording and playing back audio and sending audio as a voice email <p>

 Related information: <p>

 <blockquote> API Guides: <p>

 <ul> <li> <a href="http://developer.android.com/guide/topics/media/audio-capture.html"> Audio Capture</a> <li> <a
 href="http://developer.android.com/guide/topics/media/mediaplayer.html"> Media Playback</a> </ul> <p>

 API References: <p>

 <ul> <li> <a href= "http://developer.android.com/reference/android/media/MediaPlayer.html">
 <code>MediaPlayer</code></a> <li> <a href= "http://developer.android.com/reference/android/media/MediaRecorder.html">
 <code>MediaRecorder</code></a> <li> <a href= "http://developer.android.com/reference/android/os/CountDownTimer.html">
 <code>CountDownTimer</code></a> <li> <a href="http://developer.android.com/reference/android/os/Environment.html">
 <code>Environment</code></a> <li> <a href="http://developer.android.com/reference/android/net/Uri.html">
 <code>Uri</code></a> </ul> </blockquote>

 The UI for this demo is straight forward: <p>

 <center> <a href="./javadoc_images/DemoVoiceEmail-1.jpg"><img src="./javadoc_images/DemoVoiceEmail-1.jpg" width="300"></a> </center> <p>

 When the user clicks the Start button (under Record), recording begins. This occurs via the following code in the
 <code>onButtonClick</code> method (abbreviated, with comments): <p>

 <pre>
      // get date and time info for the file name, making it unique
      String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;, Locale.CANADA).format(System
      .currentTimeMillis());

      // name of the file to store the voice message (includes full path)
      audioFilename = dataDirectory.getPath() + File.separator + &quot;VoiceMessage_&quot; + timeStamp +
 &quot;.3gp&quot;;

      // create a new instance of a MediaRecorder
      voiceRecorder = new MediaRecorder();

      // set the audio source (we'll used the device's built-in microphone)
      voiceRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);

      // set the output file format (we'll use &quot;3gp&quot;; see
      <a href="http://en.wikipedia.org/wiki/3gp">http://en.wikipedia.org/wiki/3gp</a>)
      voiceRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);

      // set the output file name (see above)
      voiceRecorder.setOutputFile(audioFilename);

      // set the audio encoder (we're using the AMR (Narrowband) audio codec; see <a
 href="http://en.wikipedia.org/wiki/Adaptive_Multi-Rate_audio_codec">http://en.wikipedia
 .org/wiki/Adaptive_Multi-Rate_audio_codec</a>)
      voiceRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

      // prepare the MediaRecorder for recording (the above code must have worked just fine!)
      voiceRecorder.prepare(); // will throw an exception if there are problems (see the source code herein)

      // OK, we're ready to go --&gt; start recording
      voiceRecorder.start();
 </pre>

 The duration of the recording appears in a text field between the Start and Stop buttons. Updates appear each second
 via the <code>onTick</code> callback of a <code>CountDownTimer</code>. The duration will range from "0:00" to "9:59".
 If the recording exceeds ten minutes, the minutes appear as "?". <p>

 Not surprisingly, <code>onButtonClick</code> executes the following code in response to the Stop button (under
 Record): <p>

 <pre>
      if (voiceRecorder != null)
      {
         voiceRecorder.stop();
         voiceRecorder.release();
         voiceRecorder = null;
      }
 </pre>

 Consult the source code herein or the API Guides and References noted above for details on starting and stopping
 playback. <p>

 The audio data file is saved in a directory called "VoiceEmailStuff" created in the directory returned by: <p>

 <pre>
      Environment.getExternalStorageDirectory()
 </pre>

 An example file with full path is <p>

 <pre>
      /mnt/shell/emulated/0/VoiceEmailStuff/VoiceMessage_20170228_112345.3gp
 </pre>

 Playback is possible using the Start and Stop buttons under Playback. The duration of the recording appears between
 the buttons, formatted as explained above. <p>

 When the user taps the Send button, the voice message just recorded is sent as a voice email; that is, as an audio
 file in an email attachment. This occurs by launching an email intent as follows: <p>

 <pre>
      Uri voiceMessage = Uri.parse(&quot;file://&quot; + audioFilename);
      Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
      emailIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, &quot;Voice message from &quot;); // add your name
 when the email intent launches
      emailIntent.putExtra(Intent.EXTRA_STREAM, voiceMessage);
      emailIntent.setType(&quot;audio/3gp&quot;);
      startActivity(Intent.createChooser(emailIntent, &quot;Send email using...&quot;));
 </pre>

 The action associated with the intent is <code>ACTION_SEND</code>. This means that the intent has the goal of
 delivering some data to another activity. This process begins by presenting the user with a chooser to select the
 options available for <code>ACTION_SEND</code> (below left). Most Android devices include a Gmail application.
 Selecting this will choose the Gmail client with the user's email address in the "From" field (below right). The
 string given as the intent's <code>EXTRA_SUBJECT</code> is used as the "Subject" and the audio file provided as the
 intent's <code>EXTRA_STREAM</code> is used as an attachment (see above). <p>

 <center> <a href="./javadoc_images/DemoVoiceEmail-2.jpg"><img src="./javadoc_images/DemoVoiceEmail-2.jpg" width="300"></a> <a
 href="./javadoc_images/DemoVoiceEmail-3.jpg"><img src="./javadoc_images/DemoVoiceEmail-3.jpg" width="300"></a> </center> <p>

 The device's text entry method appears with focus on the "To" field. The sender enters the "To" email address and
 perhaps their name in the subject line (after "from"). Tapping the send arrow at the top sends the email. <p>

 <b>Activity and Progress Indicators</b>
 <p>

 The UI for this demo use Android's <code>ProgressBar</code> class to provide an Activity Indicator when
 recording a
 message and a Progress Indicator when playing back the message.  Both indicators are instances of the
 <code>ProgressBar</code> class.  The difference is that an Activity Indicator is used then the duration of the
 operation is unknown, or indeterminate.  This is the case when recording the message:
 <p>

 <center>
 <img src="./javadoc_images/DemoVoiceEmail-4.jpg">
 </center>
 <p>

 The animation continues as long as recording continues.
 <p>

 A Progress Indicator is used then the duration of the operation is known, or determinate:
 <p>

 <center>
 <img src="./javadoc_images/DemoVoiceEmail-5.jpg">
 </center>
 <p>

 When playing back the
 recorded message, the duration of the playback is known, since the message has already been recorded.  The
 animation in this case is a yellow bar that grows in size, filling the gray bar when the playback is
 finished.  Consult the source code and XML file for complete details.
 <p>

 <p>
 NOTE: Jan 6, 2016.  This demo app stopped working when I tried it on my new device, a Nexus 5x running Android 6. The
 message "can't attach empty file" was generated when tapping the Gmail icon to send the voice message by email. Once
 again, StackOverflow provided a quick fix: http://stackoverflow
 .com/questions/32318692/android-attaching-a-file-to-gmail-cant-attach-empty-file").
 The fix is required when running this app on Android 6.  Go to Settings > Apps > Gmail > Permissions,  and enable the
 "Storage" permission manually.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demovoiceemail/DemoVoiceEmailActivity.html#DemoVoiceEmailActivity--">DemoVoiceEmailActivity</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demovoiceemail/DemoVoiceEmailActivity.html#onButtonClick-View-">onButtonClick</a></span>(View&nbsp;v)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demovoiceemail/DemoVoiceEmailActivity.html#onCreate-Bundle-">onCreate</a></span>(Bundle&nbsp;savedInstanceState)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demovoiceemail/DemoVoiceEmailActivity.html#onCreateOptionsMenu-Menu-">onCreateOptionsMenu</a></span>(Menu&nbsp;menu)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demovoiceemail/DemoVoiceEmailActivity.html#onError-MediaPlayer-int-int-">onError</a></span>(MediaPlayer&nbsp;mp,
       int&nbsp;what,
       int&nbsp;extra)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demovoiceemail/DemoVoiceEmailActivity.html#onPause--">onPause</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DemoVoiceEmailActivity--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DemoVoiceEmailActivity</h4>
<pre>public&nbsp;DemoVoiceEmailActivity()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="onCreate-Bundle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onCreate</h4>
<pre>protected&nbsp;void&nbsp;onCreate(Bundle&nbsp;savedInstanceState)</pre>
</li>
</ul>
<a name="onButtonClick-View-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onButtonClick</h4>
<pre>public&nbsp;void&nbsp;onButtonClick(View&nbsp;v)</pre>
</li>
</ul>
<a name="onError-MediaPlayer-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onError</h4>
<pre>public&nbsp;boolean&nbsp;onError(MediaPlayer&nbsp;mp,
                       int&nbsp;what,
                       int&nbsp;extra)</pre>
</li>
</ul>
<a name="onPause--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onPause</h4>
<pre>public&nbsp;void&nbsp;onPause()</pre>
</li>
</ul>
<a name="onCreateOptionsMenu-Menu-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>onCreateOptionsMenu</h4>
<pre>public&nbsp;boolean&nbsp;onCreateOptionsMenu(Menu&nbsp;menu)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../ca/yorku/eecs/mack/demovoiceemail/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ca/yorku/eecs/mack/demovoiceemail/DemoVoiceEmailActivity.html" target="_top">Frames</a></li>
<li><a href="DemoVoiceEmailActivity.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
