<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_372) on Thu Jan 11 06:15:51 EST 2024 -->
<title>DemoTiltMeterActivity</title>
<meta name="date" content="2024-01-11">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DemoTiltMeterActivity";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterSetup.html" title="class in ca.yorku.eecs.mack.demotiltmeter"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html" target="_top">Frames</a></li>
<li><a href="DemoTiltMeterActivity.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ca.yorku.eecs.mack.demotiltmeter</div>
<h2 title="Class DemoTiltMeterActivity" class="title">Class DemoTiltMeterActivity</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>Activity</li>
<li>
<ul class="inheritance">
<li>ca.yorku.eecs.mack.demotiltmeter.DemoTiltMeterActivity</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DemoTiltMeterActivity</span>
extends Activity</pre>
<div class="block"><style> pre {font-size:110%} </style>

 Demo_TiltMeter - demo application that displays a tilt meter. </p>

 Related information: </p>

 <blockquote> See Demo_Sensors for topics and links.</blockquote> </p>

 This demo uses the Android sensors to determine the angle and magnitude of device tilt relative to a reference line
 on a flat surface. The tilt angle and tilt magnitude are displayed as a needle in a meter. </p>

 Upon launch, the user is presented with a setup dialog.  See below.  Radio buttons are used to set the sensor mode
 (described below).  A spinner is used to set the sensor sampling rate (as in Demo_Sensors).<p>

 <center><a href="./javadoc_images/DemoTiltMeter-1.jpg"><img src="./javadoc_images/DemoTiltMeter-1.jpg" width="250"></a></center> </p>

 After choosing a sampling rate and sensor mode, the main activity begins when the user taps "OK". The tilt meter
 appears with the needle indicating the position of the device relative to a flat surface (below left). </p>

 <center><a href="./javadoc_images/DemoTiltMeter-3.jpg"><img src="./javadoc_images/DemoTiltMeter-3.jpg" width="300"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a
 href="./javadoc_images/DemoTiltMeter-7.jpg"><img src="./javadoc_images/DemoTiltMeter-7.jpg" width="300"></a></center> </p>

 The meter is an instance of <code>TiltMeter</code>, a custom-designed class, sub-classed from <code>View</code>. The
 UI also outputs the device pitch and roll (as reported by the sensors) and the overall tilt angle and tilt magnitude
 (discussed below). Compare the measures reported above (image on right) with the magnitude and position of the needle
 in the tilt meter. From this information, we can infer the position of the device relative to a flat surface. </p>

 As the user moves the device about, the magnitude and direction of the meter's needle are adjusted to correspond to
 the device's tilt angle and tilt magnitude. Some examples follow. </p>

 <center> <a href="./javadoc_images/DemoTiltMeter-4.jpg"><img src="./javadoc_images/DemoTiltMeter-4.jpg" height="250"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 <a href="./javadoc_images/DemoTiltMeter-5.jpg"><img src="./javadoc_images/DemoTiltMeter-5.jpg" height="250"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a
 href="./javadoc_images/DemoTiltMeter-6.jpg"><img src="./javadoc_images/DemoTiltMeter-6.jpg" height="250"></a> </center> </p>

 The device's rotation about the <i>x</i>-axis (pitch) and the <i>y</i>-axis (roll) are available from the device
 sensors. For this demo, we need to aggregate these measures into the device's overall tilt angle and tilt magnitude.
 Tilt angle (<code>tiltAngle</code>) is the overall angle of device relative to an arbitrary reference line on the
 device, such as "straight ahead". Tilt magnitude (<code>tiltMagnitude</code>) is the angle of device tilt relative to
 a flat surface, measured at the reference line. These are computed as follows: </p>

 <pre>
      float tiltAngle = tiltMagnitude == 0f ? 0f : (float)Math.asin(roll / tiltMagnitude) * RADIANS_TO_DEGREES;
      float tiltMagnitude = (float)Math.sqrt(pitch * pitch + roll * roll);
 </pre>

 The following additional explanation may help in understanding the math above.  First, think of tilting a
 surface and then rolling a ball down the surface.  Consider the line formed by the path of the ball.  If you LOOK
 FROM ABOVE and have a reference line for 0 degrees (e.g., straight ahead), then <code>tiltAngle</code> is the angle
 between the reference line and the line corresponding to the path of the ball.  On the other hand, if you LOOK
 FROM THE SIDE, <code>tiltMagnitude</code> is the angle between the flat surface and the line corresponding to the
 path of the ball.
 <p>

 This demo was originally developed using Android's <code>TYPE_ORIENTATION</code> sensor. This sensor provides exactly
 the data needed: the pitch and roll of the device relative to a flat surface.  However, you will notice in Android
 Studio that this sensor is flagged as deprecated: </p>


 <center><img src="./javadoc_images/DemoTiltMeter-9.jpg" alt="image"></center> </p>

 Yes, the <code>TYPE_ORIENTATION</code> sensor was deprecated with Android API level 8. In the
 <code>SensorEvent</code> API under <code>TYPE_ORIENTATION</code>, we are told,

 <blockquote><i> This sensor type exists for legacy reasons, please use <code>getRotationMatrix()</code> in
 conjunction with <code>remapCoordinateSystem()</code> and <code>getOrientation()</code> to compute these values
 instead. </i></blockquote> </p>

 That's fine, but this advice can only be followed if the device has a <code>TYPE_ACCELEROMETER</code> sensor and
 possibly a <code>TYPE_MAGNETIC_FIELD</code> sensor. However, these sensors are not available on all Android devices.
 To accommodate this, the demo includes three <i>sensor modes</i> (see table below).  Experience suggests that
 <code>TYPE_ORIENTATION</code> works pretty good as the data are stable and do not require filtering or smoothing.  As
 a suggestion, try each mode (if possible) and see if the movement of the meter's needle is smooth as the device is
 moved about. The following summarizes the sensor modes used in the demo. </p>

 <blockquote> <table border="1" cellspacing="0" cellpadding="6"> <tr bgcolor="#cccccc"> <th>Sensor Mode <th>Sensor's
 Used <th>This Mode Is Used If... <th>Example Devices

 <tr> <td><font size="-1">ORIENTATION</font> <td><code>TYPE_ORIENTATION</code> <td>the device has an orientation
 sensor <td>LG <i>Nexus 4</i>, Samsung <i>Galaxy Tab 10.1</i>

 <tr> <td><font size="-1">ACCELEROMETER_AND_MAGNETIC_FIELD</font> <td><code>TYPE_ACCELEROMETER</code> and<br>
 <code>TYPE_MAGNETIC_FIELD</code> <td>the device does not have an orientation sensor but has both an accelerometer and
 a magnetic field sensor <td align="center">?

 <tr> <td><font size="-1">ACCELEROMETER_ONLY</font> <td><code>TYPE_ACCELEROMETER</code> <td>the device has an
 accelerometer but no orientation sensor and no magnetic field sensor <td>HTC <i>Desire C</i>, Asus <i>MeMO Pad</i>
 </table>
 </blockquote> </p>

 Data smoothing is required when using the <code>TYPE_ACCELEROMETER</code> sensor. Smoothing is performed by passing
 the accelerometer data through a low-pass filter.  The filtering code is contained in a simple method called
 <code>lowPass</code>, adopted from a blog post by Thom Nichols
 (<a href="http://blog.thomnichols.org/2011/08/smoothing-sensor-data-with-a-low-pass-filter">click here</a>). <p>

 This demo was designed to conform to the following advice given in the Sensors Overview API Guide:<p>

 <center><img src="./javadoc_images/DemoTiltMeter-8.jpg" alt="image"></center> </p>

 In view of this, we separate the input of sensor data (in <code>onSensorChanged</code>) from the processing of sensor
 data. In <code>onSensorChanged</code>, as little data processing as possible occurs. The processing of sensor data
 and updating the UI's view meters is handled separately: using a <code>ScreenRefreshTimer</code>, an inner class
 which is sub-classed from <code>CountDownTimer</code>. The timer is setup to timeout every 50 ms (corresponding to a
 refresh rate of 20 Hz). In the timer's <code>onFinish</code> method, the pitch and roll data from the sensors are
 used to compute the device's tilt magnitude and tilt angle (see code above).  These data are then passed to
 TiltMeter to update the angle and length of the meter's needle. <p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html#DemoTiltMeterActivity--">DemoTiltMeterActivity</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html#getDefaultDeviceOrientation--">getDefaultDeviceOrientation</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected float[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html#lowPass-float:A-float:A-float-">lowPass</a></span>(float[]&nbsp;input,
       float[]&nbsp;output,
       float&nbsp;alpha)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html#onAccuracyChanged-Sensor-int-">onAccuracyChanged</a></span>(Sensor&nbsp;sensor,
                 int&nbsp;accuracy)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html#onCreate-Bundle-">onCreate</a></span>(Bundle&nbsp;savedInstanceState)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html#onPause--">onPause</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html#onResume--">onResume</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html#onSensorChanged-SensorEvent-">onSensorChanged</a></span>(SensorEvent&nbsp;se)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html#onStop--">onStop</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DemoTiltMeterActivity--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DemoTiltMeterActivity</h4>
<pre>public&nbsp;DemoTiltMeterActivity()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="onCreate-Bundle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onCreate</h4>
<pre>public&nbsp;void&nbsp;onCreate(Bundle&nbsp;savedInstanceState)</pre>
</li>
</ul>
<a name="getDefaultDeviceOrientation--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDefaultDeviceOrientation</h4>
<pre>public&nbsp;int&nbsp;getDefaultDeviceOrientation()</pre>
</li>
</ul>
<a name="onResume--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onResume</h4>
<pre>protected&nbsp;void&nbsp;onResume()</pre>
</li>
</ul>
<a name="onPause--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onPause</h4>
<pre>protected&nbsp;void&nbsp;onPause()</pre>
</li>
</ul>
<a name="onStop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onStop</h4>
<pre>public&nbsp;void&nbsp;onStop()</pre>
</li>
</ul>
<a name="onAccuracyChanged-Sensor-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onAccuracyChanged</h4>
<pre>public&nbsp;void&nbsp;onAccuracyChanged(Sensor&nbsp;sensor,
                              int&nbsp;accuracy)</pre>
</li>
</ul>
<a name="onSensorChanged-SensorEvent-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onSensorChanged</h4>
<pre>public&nbsp;void&nbsp;onSensorChanged(SensorEvent&nbsp;se)</pre>
</li>
</ul>
<a name="lowPass-float:A-float:A-float-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>lowPass</h4>
<pre>protected&nbsp;float[]&nbsp;lowPass(float[]&nbsp;input,
                          float[]&nbsp;output,
                          float&nbsp;alpha)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterSetup.html" title="class in ca.yorku.eecs.mack.demotiltmeter"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ca/yorku/eecs/mack/demotiltmeter/DemoTiltMeterActivity.html" target="_top">Frames</a></li>
<li><a href="DemoTiltMeterActivity.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
