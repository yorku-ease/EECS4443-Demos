<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_372) on Thu Jan 11 06:15:32 EST 2024 -->
<title>DemoGridViewActivity</title>
<meta name="date" content="2024-01-11">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DemoGridViewActivity";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../ca/yorku/eecs/mack/demogridview/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../ca/yorku/eecs/mack/demogridview/DirectoryAdapter.html" title="class in ca.yorku.eecs.mack.demogridview"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ca/yorku/eecs/mack/demogridview/DemoGridViewActivity.html" target="_top">Frames</a></li>
<li><a href="DemoGridViewActivity.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ca.yorku.eecs.mack.demogridview</div>
<h2 title="Class DemoGridViewActivity" class="title">Class DemoGridViewActivity</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>Activity</li>
<li>
<ul class="inheritance">
<li>ca.yorku.eecs.mack.demogridview.DemoGridViewActivity</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DemoGridViewActivity</span>
extends Activity</pre>
<div class="block"><style> pre {font-size:110%} </style>

 Demo_GridView - demonstrate presenting images in a GridView. Also demonstrates finger gestures
 and animating view transitions. <p>

 Related information: <p>

 <blockquote> API Guides: <p>

 <ul> <li><a href="http://developer.android.com/guide/topics/ui/layout/gridview.html">Grid
 View</a>
 <li><a href="http://developer.android.com/guide/topics/graphics/prop-animation.html">Property
 Animation</a> </ul> <p>

 API References: <p>

 <ul> <li><a href="http://developer.android.com/reference/android/widget/GridView.html">
 <code>GridView</code></a>
 <li><a href="http://developer.android.com/reference/android/widget/ImageView.html">
 <code>ImageView</code></a> <li><a
 href= "http://developer.android.com/reference/android/view/GestureDetector.html">
 <code>GestureDetector</code> </a>
 <li><a href= "http://developer.android.com/reference/android/view/ScaleGestureDetector.html" >
 <code>ScaleGestureDetector</code></a>
 <li><a href="http://developer.android.com/reference/android/view/ViewPropertyAnimator.html">
 <code>ViewPropertyAnimator</code></a> </ul> <p>

 Android Developers Blog: <p>

 <ul>
 <li><a href="http://android-developers.blogspot.ca/2011/02/animation-in-honeycomb.html">Animation
 in Honeycomb</a>
 <li><a href="http://android-developers.blogspot.ca/2011/05/introducing-viewpropertyanimator.html">
 Introducing ViewPropertyAnimator</a> </ul>

 </blockquote>

 This demo replicates some of the functionality of the Gallery or Photos application provided with
 most Android devices. The main class demonstrated is <code>GridView</code>. As well,
 implementations of finger gestures are demonstrated, including dragging, flicking, tapping,
 double tapping, and two-finger pinching. Animating view transitions is also demonstrated. <p>

 The application includes three activities: <p>

 <ol> <li><code>DemoGridViewActivity</code> &ndash; grid view of directories containing images
 <li><code>DirectoryContentsActivity</code> &ndash; grid view of images within the selected
 directory
 <li><code>ImageViewerActivity</code> &ndash; detailed view of individual images </ol> <p>

 The following illustrates the flow of activities, beginning at the home screen: <p>

 <center><a href="./javadoc_images/DemoGridView-6.jpg"><img src="./javadoc_images/DemoGridView-6.jpg" width=" 300"></a></center>
 <p>


 The first activity to launch is <code>DemoGridViewActivity</code>, which presents a grid of
 thumbnail images, each representing a directory that contains images. (Here, an "image" is any
 file with a filename suffix of ".jpg" or ".JPG".) An example follows. <p>

 <center><a href="./javadoc_images/DemoGridView-1.jpg"><img src="./javadoc_images/DemoGridView-1.jpg" width=" 300"></a></center>
 <p>

 The directories are determined at run time via <code>traverse</code>, a recursive method that
 scans the device's file system looking for directories containing images. Since we are mostly
 interested in the user's images, the top-level directory for the scan is the user's root
 directory which is retrieved as an <code>Environment</code> variable: <p>

 <pre>
      File f = Environment.getExternalStorageDirectory();
      traverse(f);
 </pre>
 <p>

 The <code>getExternalStorageDirectory</code> method returns the primary external storage
 directory. The directory is
 <i>not</i> external to the device. As noted in the API, <p>

 <blockquote><blockquote><i> This directory can better be thought of as media/shared storage. It
 is a file system that can hold a relatively large amount of data and that is shared across all
 applications (does not enforce permissions). Traditionally this is an SD card, but it may also be
 implemented as built-in storage in a device that is distinct from the protected internal storage
 and can be mounted as a filesystem on a computer. </i></blockquote></blockquote>
 <p>

 Notice in the screensnap above that the directory thumbnails include a semi-transparent grey band
 along the bottom. The name of the directory and the number of images in the directory appear in
 the band. Normally, the items in the grid would be instances of <code>ImageView</code>. To create
 the desired effect, we instead use a custom class called
 <code>DirectoryImageView</code> which extends <code>ImageView</code>. A
 <code>DirectoryImageView</code> object
 includes a text string member to hold directory information. An overridden <code>onDraw</code>
 method takes care of drawing the semi-translucent grey band, the directory name, and the number
 of files. Note that the text size is smaller on some of the thumbnails to ensure the text fits in
 the available space. The adjustment occurs in the
 <code>setText</code> method in <code>DirectoryImageView.java</code> ("<code>width</code>" is the
 width of the thumbnail): <p>

 <pre>
      final float textWidth = textPaint.measureText(text);
      final float availableWidth = 0.90f * width;
      final float textSize = textPaint.getTextSize();
      if (textWidth > availableWidth)
           textPaint.setTextSize(textSize * (availableWidth / textWidth));
 </pre>

 The details of reading the images from storage are largely the same as in Demo_ListView_2.
 Consult for details. <p>

 The activity implements <code>AdapterView.OnItemClickListener</code> and attaches the listener to
 the
 <code>GridView</code> instance. When the user taps on a directory thumbnail,
 <code>onItemClick</code> executes. The
 name of the directory is bundled and sent to the next activity,
 <code>DirectoryContentsActivity</code>:
 <p>

 <pre>
      final Bundle b = new Bundle();
      b.putString("directory", directories[position].toString());
      Intent i = new Intent(getApplicationContext(), DirectoryContentsActivity.class);
      i.putExtras(b);
      startActivity(i);
 </pre>

 The second activity, <code>DirectoryContentsActivity</code>, also uses a <code>GridView</code>.
 Now, the grid shows images <i>within</i> the selected directory. Here's an example screen snap:
 <p>

 <center><a href="./javadoc_images/DemoGridView-2.jpg"><img src="./javadoc_images/DemoGridView-2.jpg" width=" 300"></a></center>
 <p>

 Once again, the images are read from storage in the same manner as in Demo_ListView_2. Consult
 for details. <p>

 If there are more images than will fit on the screen, the grid is scrollable in a vertical
 direction via finger flicks. Tapping on an image allows the image (and neighbouring images) to be
 viewed in greater detail. This occurs by bundling the directory name, the filename array, and the
 index of the image that was tapped, and launching the next activity. <p>

 The third activity is <code>ImageViewerActivity</code>, which allows individual images to be
 viewed in greater detail. The image below, on the left, shows an initial UI when the activity
 launches. <p>

 <center> <a href="./javadoc_images/DemoGridView-3.jpg"><img src="./javadoc_images/DemoGridView-3.jpg" width=" 300"></a> <a
 href="./javadoc_images/DemoGridView-4.jpg"><img src="./javadoc_images/DemoGridView-4.jpg" width=" 300"></a> <a
 href="./javadoc_images/DemoGridView-5.jpg"><img src="./javadoc_images/DemoGridView-5.jpg" width=" 300"></a> </center> <p>

 The layout for <code>ImageViewerActivity</code> is given in <code>imageviewer.xml</code>. It
 includes a
 <code>LinearLayout</code> holding a <code>TextView</code> and a <code>RelativeLayout</code>
 container with a single
 <code>ImageView</code>. The text view holds information about the image, including the filename,
 the image dimensions, and the file size. The image view holds the image. The
 <code>ImageView</code> instance is configured in
 <code>imageviewer.xml</code> to fill its parent container: <p>

 <pre>
      android:layout_width="match_parent"
      android:layout_height="match_parent"
 </pre>

 However, the image itself is scaled to fit within the bounds of the <code>ImageView</code>
 instance, in a manner that centers the image while cropping it to retain its aspect ratio. This
 occurs via <p>

 <pre>
      imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
 </pre>

 This method is invoked in the <code>getView</code> method in <code>ImageAdapter.java</code>. <p>

 A variety of finger gestures are supported when viewing images. Touch events are handled by
 implementing the
 <code>OnTouchListener</code> listener method <code>onTouch</code>. As well, two inner classes
 are used,
 <code>ScaleListener</code>, which extends <code>ScaleGestureDetector</code>, to look for scaling
 gestures, and
 <code>GestureListener</code> , which extends <code>GestureDetector</code>, to look for flicks
 (aka flings) and double taps. Instances of these classes appear at the beginning of
 <code>onTouch</code> to inspect motion events and to look for various gestures. An example of
 this was demonstrated earlier in Demo_Scale. Consult for details. <p>

 If the user double taps on the image, it zooms in to 3&times; its size (see the center image,
 above). Some of the image is off-screen. The image may be touched and moved about by a dragging
 action (see <code>ACTION_MOVE</code> in
 <code>onTouch</code>). Another double tap returns the image to its normal size. When toggling
 between normal (&times;1) and zoomed (&times;3), the transitions are animated using <p>

 <pre>
      imageView.animate().scaleX(scaleFactor).scaleY(scaleFactor).translationX(positionX)
      .translationY(positionY);
 </pre>

 The effect is to smooth the transition to the normal or zoomed state. This line of code is in
 the
 <code>onDoubleTap</code> method of <code>ImageViewerActivity.java</code>. The
 <code>animate</code> method returns a
 <code>ViewPropertyAnimator</code> object on which animation methods are chained. Each of the
 methods is associated with a setter method. For example, <code>scaleX</code> (see above) becomes
 <code>setScaleX</code>. The arguments are the values to which the animation proceeds. <p>

 Another option is to zoom in and examine a point of interest in an image using two-finger pinch
 and un-pinch gestures (see the image on the right, above). This is handled in
 <code>onScaleBegin</code> and <code>onScale</code> in
 <code>ImageViewActivity.java</code>. Implementing this was tricky, since the scaling must be
 centered on the <i>focus point</i> &mdash; the point mid-way between the two fingers when the
 gesture begins. Furthermore, if the focus point moves during scaling, the image must also move so
 that the point of interest remains between the two fingers. Thus, the <code>onScale</code> method
 must take care of both scaling and moving the image. <p>

 Scaling and moving the image are performed differently than in Demo_Scale. In Demo_Scale, the
 image was placed in a
 <code>Drawable</code>. Moving and scaling were performed by invoking the <code>translate</code>
 and
 <code>scale</code> methods on the <code>Canvas</code> given to <code>onDraw</code> and then
 drawing onto the canvas. Here, the image is retrieved as an instance of <code>Bitmap</code> which
 is placed in an
 <code>ImageView</code> instance in the grid: <p>

 <pre>
      imageView.setImageBitmap(bitmap);
 </pre>

 (This line of code is in the <code>download</code> method in <code>ImageDownloader.java</code>.)
 Moving and scaling are then performed directly on the <code>ImageView</code> instance. This
 occurs via setter methods in
 <code>onScale</code>: <p>

 <pre>
      imageView.setScaleX(scaleFactor);
      imageView.setScaleY(scaleFactor);
      imageView.setTranslationX(positionX);
      imageView.setTranslationY(positionY);
 </pre>

 The variables <code>scaleFactor</code>, <code>positionX</code>, and <code>positionY</code> are
 defined in
 <code>ImageViewerActivity</code>. They are updated to respond to finger gestures based on the
 <i>x</i> and <i>y</i>
 data provided in <code>MotionEvent</code>. <p>

 Finally, flicking to the left or right advances to the next or previous image, respectively. To
 avoid an abrupt transition, the new image is initially invisible: <p>

 <pre>
      imageView.setAlpha(0f);
 </pre>

 It fades in via <p>

 <pre>
      imageView.animate().alpha(1f);
 </pre>

 The line of code above is in <code>displayImage</code> in <code>ImageViewerActivity.java</code>.
 <p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demogridview/DemoGridViewActivity.html#DemoGridViewActivity--">DemoGridViewActivity</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demogridview/DemoGridViewActivity.html#onCreate-Bundle-">onCreate</a></span>(Bundle&nbsp;savedInstanceState)</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demogridview/DemoGridViewActivity.html#onItemClick--View-int-long-">onItemClick</a></span>(&lt;any&gt;&nbsp;parent,
           View&nbsp;v,
           int&nbsp;position,
           long&nbsp;id)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/yorku/eecs/mack/demogridview/DemoGridViewActivity.html#traverse-java.io.File-">traverse</a></span>(java.io.File&nbsp;file)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DemoGridViewActivity--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DemoGridViewActivity</h4>
<pre>public&nbsp;DemoGridViewActivity()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="onCreate-Bundle-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onCreate</h4>
<pre>public&nbsp;void&nbsp;onCreate(Bundle&nbsp;savedInstanceState)</pre>
</li>
</ul>
<a name="onItemClick--View-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onItemClick</h4>
<pre>public&nbsp;void&nbsp;onItemClick(&lt;any&gt;&nbsp;parent,
                        View&nbsp;v,
                        int&nbsp;position,
                        long&nbsp;id)</pre>
</li>
</ul>
<a name="traverse-java.io.File-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>traverse</h4>
<pre>public&nbsp;void&nbsp;traverse(java.io.File&nbsp;file)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../ca/yorku/eecs/mack/demogridview/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../ca/yorku/eecs/mack/demogridview/DirectoryAdapter.html" title="class in ca.yorku.eecs.mack.demogridview"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ca/yorku/eecs/mack/demogridview/DemoGridViewActivity.html" target="_top">Frames</a></li>
<li><a href="DemoGridViewActivity.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
